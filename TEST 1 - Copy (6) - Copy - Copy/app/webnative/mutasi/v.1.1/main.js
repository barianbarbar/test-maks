var transactionData,mainInput=document.querySelector("#main-input"),noContent=document.querySelector("#no-content"),mainContent=document.querySelector("#main-content"),wrapperContent=document.querySelector("#wrapper-content"),labelMonth=document.querySelector("#label-month"),labelUangMasuk=document.querySelector("#label-uang-masuk"),labelUangKeluar=document.querySelector("#label-uang-keluar"),rangeDate=document.querySelector("#range-date"),btnNext=document.querySelector("#btn-next"),btnPrevious=document.querySelector("#btn-previous"),leftArrow=document.querySelector("#icon_panah_b"),rightArrow=document.querySelector("#icon_panah_a"),backgroundLeftArrow=leftArrow.querySelector("#Rectangle_423"),backgroundRightArrow=rightArrow.querySelector("#Rectangle_1287"),strokeLeftArrow=leftArrow.querySelector("#Path_619"),strokeRightArrow=rightArrow.querySelector("#Path_619"),date=new Date,selectedMonth=0,selectedYear=date.getFullYear(),defaultStyle={defaultHeight:"",wrapperHeight:"",wrapperMargin:""},sendData={tanggal:"",tipe:""},months=["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],formatRupiah=function(e,t){var n=(e="string"==typeof e?e:e.toString()).replace(/[^,\d]/g,"").toString().split(","),a=n[0].length%3,r=n[0].substr(0,a),o=n[0].substr(a).match(/\d{3}/gi);o&&(r+=(a?".":"")+o.join("."));return"string"==typeof e?parseInt(e)<0&&(r="-"+r):e<0&&(r="-"+r),r=null!=n[1]?r+","+n[1]:r,null==t?r:r?"Rp "+r:""},injectData=function(e){try{Android.log("response_kiriman"+e)}catch(e){Android.log(e)}transactionData=JSON.parse(e),setupContent()},getData=function(e){try{Android.log("getData")}catch(e){}var t;if("masuk"===sendData.tipe)try{t=Android.getData("masuk",e.tanggal.toString())}catch(e){}else if("keluar"===sendData.tipe)try{t=Android.getData("keluar",e.tanggal.toString())}catch(e){}else try{t=Android.getData("all",e.tanggal.toString())}catch(e){}transactionData=JSON.parse(t),setupContent()},postData=function(e){getData(e)},setSendData=function(){var e=selectedMonth+1;sendData.tanggal="".concat(selectedYear,"-").concat(1===e.toString().length?"0"+(selectedMonth+1):selectedMonth+1,"-1"),postData(sendData)},onClickPrevious=function(){backgroundRightArrow.setAttribute("fill","#2b3252"),strokeRightArrow.setAttribute("fill","#fff"),--selectedMonth<0&&(selectedMonth=11,selectedYear--),setSendData()},onClickNext=function(){if(date.getMonth()-1===selectedMonth&&date.getFullYear()===selectedYear&&(backgroundRightArrow.setAttribute("fill","#dedede"),strokeRightArrow.setAttribute("fill","#777")),date.getMonth()===selectedMonth&&date.getFullYear()===selectedYear){if(document.querySelector(".alert"))return;labelMonth.parentElement.insertAdjacentHTML("beforebegin",'\n    <div class="alert alert-danger alert-dismissible fade show mb-2 border-radius-8" role="alert">\n      Yaah, bulan setelah ini belum berjalan. ðŸ˜¥\n      <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close" onclick="onCloseAlert()"></button>\n    </div>\n    ');var e=mainInput.offsetHeight;return wrapperContent.style.height="calc(100vh - ".concat(e+4,"px)"),void(wrapperContent.parentElement.parentElement.style.marginTop="".concat(e+4,"px"))}++selectedMonth>11&&(selectedMonth=0,selectedYear++),setSendData()},onClickUangAll=function(e){"all"!==sendData.tipe&&(sendData.tipe="all",setSendData())},onClickUangMasuk=function(e){"masuk"!==sendData.tipe&&(sendData.tipe="masuk",setSendData())},onClickUangKeluar=function(e){"keluar"!==sendData.tipe&&(sendData.tipe="keluar",setSendData())},onCloseAlert=function(){setTimeout((function(){setupWrapperContentStyle()}),100)},isMenuActive=function(e){try{sendData.tipe=e,setSendData()}catch(e){console.log(e)}},setupActive=function(e){document.querySelectorAll(".menu").forEach((function(e){e.classList.contains("border-orange")&&e.classList.remove("border-orange")})),e.classList.add("border-orange")},setupWrapperContentStyle=function(){defaultStyle.wrapperHeight="calc(100vh - ".concat(defaultStyle.defaultHeight+4,"px)"),defaultStyle.wrapperMargin="204px",wrapperContent.style.height=defaultStyle.wrapperHeight,wrapperContent.parentElement.parentElement.style.marginTop=defaultStyle.wrapperMargin,wrapperContent.parentElement.parentElement.style.transition="all 0.3s ease-in-out"},setupContent=function(){var e="",t=document.querySelector("#content");if(200===transactionData.status){var n=transactionData.response.data,a=n.total_uang_masuk,r=n.total_uang_keluar,o=n.detail;t.innerHTML="",labelMonth.innerHTML=months[selectedMonth];var l=new Date(selectedYear,selectedMonth,1),s=new Date(selectedYear,selectedMonth+1,0);rangeDate.innerHTML="".concat(l.getDate()," - ").concat(s.getDate()," ").concat(months[selectedMonth]," ").concat(selectedYear),labelUangMasuk.innerHTML=formatRupiah(a.toString(),"Rp "),labelUangKeluar.innerHTML=formatRupiah(r.toString(),"Rp "),mainContent.classList.remove("d-none"),noContent.classList.add("d-none");var c=mainInput.offsetHeight;defaultStyle.defaultHeight=c,setupWrapperContentStyle(),o.map((function(t){e+='\n      <div>\n        <h6 class="font-large">'.concat(t.title,'</h6>\n        <div class="d-flex justify-content-between">\n          <span class="font-medium">').concat(t.sub_title,'</span>\n          <span class="').concat("masuk"===t.tipeMutasi?"text-success":"text-danger",' font-medium">').concat("masuk"===t.tipeMutasi?"+ ":""," ").concat(formatRupiah(t.mutasi.toString()),'</span>\n        </div>\n        <div class="d-flex justify-content-between">\n          <span class="font-medium">').concat(t.tanggal,'</span>\n          <span class="font-medium">').concat(formatRupiah(t.saldo_akhir),'</span>\n        </div>\n        <hr class="my-2" />\n    </div>\n      ')})),t.innerHTML=e}else{labelMonth.innerHTML=months[selectedMonth];var i=new Date(selectedYear,selectedMonth,1),u=new Date(selectedYear,selectedMonth+1,0);labelUangMasuk.innerHTML=formatRupiah(0,"Rp "),labelUangKeluar.innerHTML=formatRupiah(0,"Rp "),rangeDate.innerHTML="".concat(i.getDate()," - ").concat(u.getDate()," ").concat(months[selectedMonth]," ").concat(selectedYear),mainContent.classList.add("d-none"),noContent.classList.remove("d-none")}},downloadMutasi=function(){var e=new Date(selectedYear,selectedMonth,1),t=new Date(selectedYear,selectedMonth+1,0),n="".concat(e.getFullYear(),"-").concat(e.getMonth()+1,"-").concat(e.getDate()),a="".concat(t.getFullYear(),"-").concat(t.getMonth()+1,"-").concat(t.getDate());Android.downloadMutasi(n,a)},setupTotalFirst=function(){var e=date.getMonth();selectedMonth=e,backgroundRightArrow.setAttribute("fill","#dedede"),strokeRightArrow.setAttribute("fill","#777"),backgroundLeftArrow.setAttribute("fill","#2b3252"),strokeLeftArrow.setAttribute("fill","#fff")};window.onload=function(){setupTotalFirst()};